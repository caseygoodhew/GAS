<script>
const predictorMovementsModule = moduleWrapper({
  save: {
    handler: (api, data) => api.saveSetupData(data),
    success: (data) => {},
    userError: (payload) => {},
  }
}, ({ bus, constants, onDataChange }) => {

  const { REGISTRY } = constants;
  const RECURRENCE_LIST = ['One time only', 'Monthly', 'Quarterly', 'Yearly'];
  const appState = {};
  const SECTIONS = ['income', 'regular', 'mortgage', 'lifeEvents'];

  const clearAppState = () => {
    appState.movements = {};
    appState.accounts = {};

    SECTIONS.forEach(key => appState.movements[key] = []);
  }

  const setData = (data) => {
    clearAppState();

    if (data) {
      SECTIONS.forEach(key => {
        if (Array.isArray(data[key])) {
          appState.movements[key] = data[key];
        }
      });
    }

    refreshAccounts();
    renderAllMovementsSections();
  }

  const getData = () => {
    return clone(appState.movements);
  }

  const refreshAccounts = () => {
    const data = bus.relay[REGISTRY].getData();
     // AI TODO: filter out deleted entries
     // AI TODO: create an array of account labels as ([Owner Name] - [Account Label])
     // AI TODO: store the result on appState.accounts
  }

  /**
   * Orchestrates the rendering of all sections in the Movements tab
   */
  const renderAllMovementsSections = () => {
    // TODO: Create renderes for each of the templates listed in html_movements
  };

  const renderEmptyEntries = (container) => {
    container.innerHTML = '<p class="empty-msg">No entries</p>';
  }

  const activate = () => {
    refreshAccounts();
    renderAllMovementsSections();
  }

  return {
    activate,
    getData,
    setData,
  };
});
//# sourceURL=js_movements.js
</script>
